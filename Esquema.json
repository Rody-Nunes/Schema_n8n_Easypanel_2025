{
  "services": [
    {
      "type": "app",
      "data": {
        "projectName": "automation",
        "serviceName": "n8n_main",
        "source": {
          "type": "image",
          "image": "n8nio/n8n:1.118.1"
        },
        "domains": [
          {
            "host": "$(EASYPANEL_DOMAIN)",
            "port": 5678
          }
        ],
        "env": "WEBHOOK_URL=https://$(PRIMARY_DOMAIN)\nN8N_HOST=0.0.0.0\nN8N_PORT=5678\nEXECUTIONS_MODE=queue\nN8N_PROCESS=main\nQUEUE_BULL_REDIS_HOST=automation_redis\nQUEUE_BULL_REDIS_PORT=6379\nQUEUE_BULL_REDIS_USERNAME=default\nQUEUE_BULL_REDIS_PASSWORD=YmIkgHu9jAnub7BkO3vomH4sQDgPdenK\nQUEUE_BULL_REDIS_DB=0\nDB_TYPE=postgresdb\nDB_POSTGRESDB_HOST=automation_postgres\nDB_POSTGRESDB_PORT=5432\nDB_POSTGRESDB_DATABASE=automation\nDB_POSTGRESDB_USER=postgres\nDB_POSTGRESDB_PASSWORD=YmIkgHu9jAnub7BkO3vomH4sQDgPdenK\nN8N_ENCRYPTION_KEY=Orion@n8n1357\nEXECUTIONS_DATA_SAVE_ON_ERROR=all\nEXECUTIONS_DATA_SAVE_ON_SUCCESS=all\nEXECUTIONS_DATA_SAVE_MANUAL_EXECUTIONS=true\nOFFLOAD_MANUAL_EXECUTIONS_TO_WORKERS=true\nN8N_RUNNERS_ENABLED=true\nN8N_MCP_ENABLED=true\nN8N_METRICS=true\nQUEUE_HEALTH_CHECK_ACTIVE=true\nN8N_BLOCK_ENV_ACCESS_IN_NODE=false\nN8N_GIT_NODE_DISABLE_BARE_REPOS=true\nN8N_ENFORCE_SETTINGS_FILE_PERMISSIONS=true\nGENERIC_TIMEZONE=America/Sao_Paulo\nN8N_DEFAULT_LOCALE=pt-BR\nTZ=America/Sao_Paulo",
        "mounts": [
          {
            "type": "volume",
            "name": "n8n_main_data",
            "mountPath": "/home/node/.n8n"
          }
        ]
      }
    },
    {
      "type": "app",
      "data": {
        "projectName": "automation",
        "serviceName": "n8n_worker",
        "source": {
          "type": "image",
          "image": "n8nio/n8n:1.118.1"
        },
        "deploy": {
          "command": "/bin/sh -c 'n8n worker'"
        },
        "env": "EXECUTIONS_MODE=queue\nN8N_PROCESS=worker\nQUEUE_BULL_REDIS_HOST=automation_redis\nQUEUE_BULL_REDIS_PORT=6379\nQUEUE_BULL_REDIS_USERNAME=default\nQUEUE_BULL_REDIS_PASSWORD=YmIkgHu9jAnub7BkO3vomH4sQDgPdenK\nQUEUE_BULL_REDIS_DB=0\nDB_TYPE=postgresdb\nDB_POSTGRESDB_HOST=automation_postgres\nDB_POSTGRESDB_PORT=5432\nDB_POSTGRESDB_DATABASE=automation\nDB_POSTGRESDB_USER=postgres\nDB_POSTGRESDB_PASSWORD=YmIkgHu9jAnub7BkO3vomH4sQDgPdenK\nN8N_ENCRYPTION_KEY=Orion@n8n1357\nN8N_DISABLE_ACTIVE_WORKFLOWS=true\nEXECUTIONS_DATA_SAVE_ON_ERROR=all\nEXECUTIONS_DATA_SAVE_ON_SUCCESS=all\nN8N_RUNNERS_ENABLED=true\nN8N_GRACEFUL_SHUTDOWN_TIMEOUT=60\nN8N_BLOCK_ENV_ACCESS_IN_NODE=false\nN8N_GIT_NODE_DISABLE_BARE_REPOS=true\nN8N_ENFORCE_SETTINGS_FILE_PERMISSIONS=true\nGENERIC_TIMEZONE=America/Sao_Paulo\nN8N_DEFAULT_LOCALE=pt-BR\nTZ=America/Sao_Paulo",
        "mounts": [
          {
            "type": "volume",
            "name": "n8n_worker_data",
            "mountPath": "/home/node/.n8n"
          }
        ]
      }
    }
  ]
}
